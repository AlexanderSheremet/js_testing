(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();class e{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{type:"American Express",number:"371449635398431"},{type:"Diners Club",number:"30569309025904"},{type:"Discover",number:"6011111111111117"},{type:"Мир",number:"2200123456789001"},{type:"MasterCard",number:"5555555555554444"},{type:"Visa",number:"4111111111111111"}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class='table-examples'>\n        <h3>Example credit card numbers</h3>\n        <table class="table table-bordered">\n          <thead>\n            <tr>\n              <th>Credit Card Type</th>\n              <th>Credit Card Number</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${this.cards.map((t=>`\n              <tr>\n                <td>${t.type}</td>\n                <td>${t.number}</td>\n              </tr>\n            `)).join("")}\n          </tbody>\n        </table>\n      </div>\n    `}}const n=t.p+"img/visa_electron_curved.png",r=t.p+"img/mastercard_curved.png",i=t.p+"img/credit_card_amex.png",s=t.p+"img/discover_straight_32px.png",a=t.p+"img/mir_card.png",c=t.p+"img/diners_club_card.png";class o{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{class:"visa",title:"Visa",url:n},{class:"master",title:"Mastercard",url:r},{class:"amex",title:"American Express",url:i},{class:"discover",title:"Discover",url:s},{class:"mir",title:"Mir",url:a},{class:"diners_club",title:"Diners Club",url:c}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class="cards">\n        ${this.cards.map((t=>`\n        <div>\n          <img class="card ${t.class}" src=${t.url} alt="${t.title}">\n        </div>  \n        `)).join("")}\n      </div>\n    `}}class l{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.onSubmit=this.onSubmit.bind(this),this.onInputChange=this.onInputChange.bind(this)}bindToDOM(){this.container.innerHTML=l.markup;const{selector:t,messageSelector:e,submitSelector:n,inputSelector:r}=l;this.element=this.container.querySelector(t),this.message=this.element.querySelector(e),this.submit=this.element.querySelector(n),this.input=this.element.querySelector(r),this.element.addEventListener("submit",this.onSubmit),this.input.addEventListener("input",this.onInputChange)}onSubmit(t){t.preventDefault();const e=function(t){const e=`${t}`;let n=0,r=!1;for(let t=e.length-1;t>=0;t-=1){let i=parseInt(e.charAt(t),10);r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10==0}(this.input.value);if(this.input.classList.toggle("valid",e),this.input.classList.toggle("invalid",!e),e){const t=function(t){let e="no-found";const n=String(t);return/^4[0-9]{12}(?:[0-9]{3})?$/.test(n)&&(e="visa"),/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/.test(n)&&(e="master"),/^220(0|4)[0-9]{12}$/.test(n)&&(e="mir"),/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/.test(n)&&(e="discover"),/^3[47][0-9]{13}$/.test(n)&&(e="amex"),/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(n)&&(e="diners_club"),e}(this.input.value),e=document.querySelector(`.${t}`);e?e.classList.add("card-active"):this.showMessage()}}onInputChange(){this.input.classList.remove("invalid","valid");const t=document.querySelector(".card-active");t&&t.classList.remove("card-active"),this.hideMessage()}showMessage(){this.message.classList.remove("hidden")}hideMessage(){this.message.classList.add("hidden")}static get markup(){return'\n      <form id="form" class="form">\n          <div class="form-group">\n              <input class="form-control" id="card_number" name="card_number" type="text" placeholder="Credit card number" data-original-title="" title="">\n          </div>\n          <div class=\'button-wrapper\'>\n            <button class="submit">Click to Validate</button>\n          </div> \n          <span class="message hidden">Упсс! Платежной системы нет в базе</span>\n      </form>\n    '}static get selector(){return".form"}static get messageSelector(){return".message"}static get submitSelector(){return".submit"}static get inputSelector(){return".form-control"}}class d{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=d.markup,this.element=this.container.querySelector(d.selector),this.formContainer=this.element.querySelector(d.formSelector),this.cardsContainer=this.element.querySelector(d.cardsSelector);new l(this.formContainer).bindToDOM();new o(this.cardsContainer).bindToDOM()}static get formSelector(){return".form-container"}static get cardsSelector(){return".cards-container"}static get selector(){return".widget"}static get markup(){return"\n      <div class='widget'>\n        <h3>Check your credit card number</h3>\n        <div class='form-container'></div>\n        <div class='cards-container'></div>\n      </div>\n    "}}class u{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=u.markUp,this.widgetContainer=this.container.querySelector(u.widgetSelector),this.tableContainer=this.container.querySelector(u.tableSelector);new d(this.widgetContainer).bindToDOM();new e(this.tableContainer).bindToDOM()}static get markUp(){return'\n      <div class="headmast">\n        <h2>Validate Credit Card Numbers</h2>\n        <h3>Check a credit card number with our online checker!</h3>\n        <div class="widget-container"></div>\n        <div class="table-container"></div>\n      </div>\n    '}static get widgetSelector(){return".widget-container"}static get tableSelector(){return".table-container"}}console.log("it works!");const m=document.querySelector("#card-validator-container");new u(m).bindToDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0FBQyxFQ0QzQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsRUFDaEIsQ0FBRSxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEcsTUNBeEIsSUFBSUMsRUFDQVAsRUFBb0JDLEVBQUVPLGdCQUFlRCxFQUFZUCxFQUFvQkMsRUFBRVEsU0FBVyxJQUN0RixJQUFJQyxFQUFXVixFQUFvQkMsRUFBRVMsU0FDckMsSUFBS0gsR0FBYUcsSUFDYkEsRUFBU0MsZ0JBQ1pKLEVBQVlHLEVBQVNDLGNBQWNDLE1BQy9CTCxHQUFXLENBQ2YsSUFBSU0sRUFBVUgsRUFBU0kscUJBQXFCLFVBQzVDLEdBQUdELEVBQVFFLE9BRVYsSUFEQSxJQUFJQyxFQUFJSCxFQUFRRSxPQUFTLEVBQ2xCQyxHQUFLLElBQU1ULEdBQVdBLEVBQVlNLEVBQVFHLEtBQUtKLEdBRXhELENBSUQsSUFBS0wsRUFBVyxNQUFNLElBQUlVLE1BQU0seURBQ2hDVixFQUFZQSxFQUFVVyxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRmxCLEVBQW9CbUIsRUFBSVosQyxLQ2hCVCxNQUFNYSxFQUNuQkMsV0FBQUEsQ0FBWUMsR0FDVixLQUFNQSxhQUFxQkMsYUFDekIsTUFBTSxJQUFJTixNQUFNLGdDQUdsQmQsS0FBS21CLFVBQVlBLEVBQ2pCbkIsS0FBS3FCLE1BQVEsQ0FDWCxDQUFFQyxLQUFNLG1CQUFvQkMsT0FBUSxtQkFDcEMsQ0FBRUQsS0FBTSxjQUFlQyxPQUFRLGtCQUMvQixDQUFFRCxLQUFNLFdBQVlDLE9BQVEsb0JBQzVCLENBQUVELEtBQU0sTUFBT0MsT0FBUSxvQkFDdkIsQ0FBRUQsS0FBTSxhQUFjQyxPQUFRLG9CQUM5QixDQUFFRCxLQUFNLE9BQVFDLE9BQVEsb0JBRTVCLENBRUFDLFNBQUFBLEdBQ0V4QixLQUFLbUIsVUFBVU0sVUFBWXpCLEtBQUswQixNQUNsQyxDQUVBLFVBQUlBLEdBQ0YsTUFBUSxvVUFXRTFCLEtBQUtxQixNQUNkTSxLQUNFQyxHQUFVLDZDQUVLQSxFQUFLTixrQ0FDTE0sRUFBS0wsbURBSXRCTSxLQUFLLCtEQUtSLEUsK01DeENhLE1BQU1DLEVBQ25CWixXQUFBQSxDQUFZQyxHQUNWLEtBQU1BLGFBQXFCQyxhQUN6QixNQUFNLElBQUlOLE1BQU0sZ0NBR2xCZCxLQUFLbUIsVUFBWUEsRUFDakJuQixLQUFLcUIsTUFBUSxDQUNYLENBQUVVLE1BQU8sT0FBUUMsTUFBTyxPQUFRQyxJQUFLQyxHQUNyQyxDQUFFSCxNQUFPLFNBQVVDLE1BQU8sYUFBY0MsSUFBS0UsR0FDN0MsQ0FBRUosTUFBTyxPQUFRQyxNQUFPLG1CQUFvQkMsSUFBS0csR0FDakQsQ0FBRUwsTUFBTyxXQUFZQyxNQUFPLFdBQVlDLElBQUtJLEdBQzdDLENBQUVOLE1BQU8sTUFBT0MsTUFBTyxNQUFPQyxJQUFLSyxHQUNuQyxDQUFFUCxNQUFPLGNBQWVDLE1BQU8sY0FBZUMsSUFBS00sR0FFdkQsQ0FFQWYsU0FBQUEsR0FDRXhCLEtBQUttQixVQUFVTSxVQUFZekIsS0FBSzBCLE1BQ2xDLENBRUEsVUFBSUEsR0FDRixNQUFRLHdDQUVGMUIsS0FBS3FCLE1BQ1ZNLEtBQ0VDLEdBQVUsK0NBRVlBLEVBQUtHLGNBQWNILEVBQUtLLFlBQVlMLEVBQUtJLHdDQUlqRUgsS0FBSyx5QkFHUixFQ3hDYSxNQUFNVyxFQUNuQnRCLFdBQUFBLENBQVlDLEdBQ1YsS0FBTUEsYUFBcUJDLGFBQ3pCLE1BQU0sSUFBSU4sTUFBTSxnQ0FHbEJkLEtBQUttQixVQUFZQSxFQUVqQm5CLEtBQUt5QyxTQUFXekMsS0FBS3lDLFNBQVNDLEtBQUsxQyxNQUNuQ0EsS0FBSzJDLGNBQWdCM0MsS0FBSzJDLGNBQWNELEtBQUsxQyxLQUMvQyxDQUVBd0IsU0FBQUEsR0FDRXhCLEtBQUttQixVQUFVTSxVQUFZZSxFQUFVZCxPQUVyQyxNQUFNLFNBQ0prQixFQUFRLGdCQUFFQyxFQUFlLGVBQUVDLEVBQWMsY0FBRUMsR0FDekNQLEVBRUp4QyxLQUFLZ0QsUUFBVWhELEtBQUttQixVQUFVOEIsY0FBY0wsR0FDNUM1QyxLQUFLa0QsUUFBVWxELEtBQUtnRCxRQUFRQyxjQUFjSixHQUMxQzdDLEtBQUttRCxPQUFTbkQsS0FBS2dELFFBQVFDLGNBQWNILEdBQ3pDOUMsS0FBS29ELE1BQVFwRCxLQUFLZ0QsUUFBUUMsY0FBY0YsR0FFeEMvQyxLQUFLZ0QsUUFBUUssaUJBQWlCLFNBQVVyRCxLQUFLeUMsVUFDN0N6QyxLQUFLb0QsTUFBTUMsaUJBQWlCLFFBQVNyRCxLQUFLMkMsY0FDNUMsQ0FFQUYsUUFBQUEsQ0FBU3ZDLEdBQ1BBLEVBQUVvRCxpQkFFRixNQUFNQyxFQ25DSyxTQUFpQkMsR0FDOUIsTUFBTUMsRUFBTyxHQUFFRCxJQUNmLElBQUlFLEVBQVMsRUFDVEMsR0FBUSxFQUNaLElBQUssSUFBSUMsRUFBSUgsRUFBSTdDLE9BQVMsRUFBR2dELEdBQUssRUFBR0EsR0FBSyxFQUFHLENBQzNDLElBQUlDLEVBQVNDLFNBQVNMLEVBQUlNLE9BQU9ILEdBQUksSUFFakNELElBQVVFLEdBQVUsR0FBSyxJQUMzQkEsR0FBVSxHQUVaSCxHQUFVRyxFQUNWRixHQUFTQSxDQUNYLENBRUEsT0FBT0QsRUFBUyxJQUFPLENBQ3pCLENEb0J3Qk0sQ0FBUWhFLEtBQUtvRCxNQUFNSSxPQUl2QyxHQUhBeEQsS0FBS29ELE1BQU1hLFVBQVVDLE9BQU8sUUFBU1gsR0FDckN2RCxLQUFLb0QsTUFBTWEsVUFBVUMsT0FBTyxXQUFZWCxHQUVwQ0EsRUFBYSxDQUNmLE1BQU1ZLEVFeENHLFNBQTJCWCxHQUN4QyxJQUFJWSxFQUFZLFdBQ2hCLE1BQU1DLEVBQUlDLE9BQU9kLEdBNkJqQixNQTVCSSw0QkFBNEJlLEtBQUtGLEtBQ25DRCxFQUFZLFFBR1YsMERBQTBERyxLQUFLRixLQUNqRUQsRUFBWSxVQUdWLHNCQUFzQkcsS0FBS0YsS0FDN0JELEVBQVksT0FJWiw2SEFBNkhHLEtBQzNIRixLQUdGRCxFQUFZLFlBR1YsbUJBQW1CRyxLQUFLRixLQUMxQkQsRUFBWSxRQUdWLG1DQUFtQ0csS0FBS0YsS0FDMUNELEVBQVksZUFHUEEsQ0FDVCxDRlE0QkksQ0FBa0J4RSxLQUFLb0QsTUFBTUksT0FDN0M1QixFQUFPckIsU0FBUzBDLGNBQWUsSUFBR2tCLEtBRXBDdkMsRUFDRkEsRUFBS3FDLFVBQVVRLElBQUksZUFFbkJ6RSxLQUFLMEUsYUFFVCxDQUNGLENBRUEvQixhQUFBQSxHQUNFM0MsS0FBS29ELE1BQU1hLFVBQVVVLE9BQU8sVUFBVyxTQUN2QyxNQUFNQyxFQUFhckUsU0FBUzBDLGNBQWMsZ0JBQ3RDMkIsR0FDRkEsRUFBV1gsVUFBVVUsT0FBTyxlQUU5QjNFLEtBQUs2RSxhQUNQLENBRUFILFdBQUFBLEdBQ0UxRSxLQUFLa0QsUUFBUWUsVUFBVVUsT0FBTyxTQUNoQyxDQUVBRSxXQUFBQSxHQUNFN0UsS0FBS2tELFFBQVFlLFVBQVVRLElBQUksU0FDN0IsQ0FFQSxpQkFBVy9DLEdBQ1QsTUFBUSw2ZEFXVixDQUVBLG1CQUFXa0IsR0FDVCxNQUFPLE9BQ1QsQ0FFQSwwQkFBV0MsR0FDVCxNQUFPLFVBQ1QsQ0FFQSx5QkFBV0MsR0FDVCxNQUFPLFNBQ1QsQ0FFQSx3QkFBV0MsR0FDVCxNQUFPLGVBQ1QsRUc1RmEsTUFBTStCLEVBQ25CNUQsV0FBQUEsQ0FBWUMsR0FDVixLQUFNQSxhQUFxQkMsYUFDekIsTUFBTSxJQUFJTixNQUFNLGdDQUdsQmQsS0FBS21CLFVBQVlBLENBQ25CLENBRUFLLFNBQUFBLEdBQ0V4QixLQUFLbUIsVUFBVU0sVUFBWXFELEVBQU9wRCxPQUVsQzFCLEtBQUtnRCxRQUFVaEQsS0FBS21CLFVBQVU4QixjQUFjNkIsRUFBT2xDLFVBQ25ENUMsS0FBSytFLGNBQWdCL0UsS0FBS2dELFFBQVFDLGNBQWM2QixFQUFPRSxjQUN2RGhGLEtBQUtpRixlQUFpQmpGLEtBQUtnRCxRQUFRQyxjQUFjNkIsRUFBT0ksZUFFM0MsSUFBSTFDLEVBQVV4QyxLQUFLK0UsZUFDM0J2RCxZQUVTLElBQUlNLEVBQVU5QixLQUFLaUYsZ0JBQzNCekQsV0FDUixDQUVBLHVCQUFXd0QsR0FDVCxNQUFPLGlCQUNULENBRUEsd0JBQVdFLEdBQ1QsTUFBTyxrQkFDVCxDQUVBLG1CQUFXdEMsR0FDVCxNQUFPLFNBQ1QsQ0FFQSxpQkFBV2xCLEdBQ1QsTUFBUSwyTEFPVixFQzNDYSxNQUFNeUQsRUFDbkJqRSxXQUFBQSxDQUFZQyxHQUNWLEtBQU1BLGFBQXFCQyxhQUN6QixNQUFNLElBQUlOLE1BQU0sZ0NBR2xCZCxLQUFLbUIsVUFBWUEsQ0FDbkIsQ0FFQUssU0FBQUEsR0FDRXhCLEtBQUttQixVQUFVTSxVQUFZMEQsRUFBVUMsT0FDckNwRixLQUFLcUYsZ0JBQWtCckYsS0FBS21CLFVBQVU4QixjQUNwQ2tDLEVBQVVHLGdCQUVadEYsS0FBS3VGLGVBQWlCdkYsS0FBS21CLFVBQVU4QixjQUFja0MsRUFBVUssZUFFOUMsSUFBSVYsRUFBTzlFLEtBQUtxRixpQkFDeEI3RCxZQUVPLElBQUlpRSxFQUFtQnpGLEtBQUt1RixnQkFDcEMvRCxXQUNSLENBRUEsaUJBQVc0RCxHQUNULE1BQVEsb1FBUVYsQ0FFQSx5QkFBV0UsR0FDVCxNQUFPLG1CQUNULENBRUEsd0JBQVdFLEdBQ1QsTUFBTyxrQkFDVCxFQ3pDRkUsUUFBUUMsSUFBSSxhQUVaLE1BQU14RSxFQUFZWixTQUFTMEMsY0FBYyw2QkFDdkIsSUFBSWtDLEVBQVVoRSxHQUN0QkssVyIsInNvdXJjZXMiOlsid2VicGFjazovL2pzX3Rlc3Rpbmcvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2pzX3Rlc3Rpbmcvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy8uL3NyYy9qcy9jb21wb25lbnRzL2NhcmRzLWV4YW1wbGVzLXRhYmxlL0NhcmRzRXhhbXBsZXNUYWJsZS5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvY2FyZC1saXN0L0NhcmRzTGlzdC5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvY2hlY2stZm9ybS9DaGVja0Zvcm0uanMiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy8uL3NyYy9qcy92YWxpZGF0aW9uL2lzVmFsaWQuanMiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy8uL3NyYy9qcy92YWxpZGF0aW9uL2ZpbmRQYXltZW50U3lzdGVtLmpzIiwid2VicGFjazovL2pzX3Rlc3RpbmcvLi9zcmMvanMvY29tcG9uZW50cy93aWRnZXQvV2lkZ2V0LmpzIiwid2VicGFjazovL2pzX3Rlc3RpbmcvLi9zcmMvanMvY29tcG9uZW50cy92YWxpZGF0b3IvVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2pzX3Rlc3RpbmcvLi9zcmMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCAnLi9jYXJkcy1leGFtcGxlcy10YWJsZS5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkRXhhbXBsZXNUYWJsZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5jYXJkcyA9IFtcbiAgICAgIHsgdHlwZTogJ0FtZXJpY2FuIEV4cHJlc3MnLCBudW1iZXI6ICczNzE0NDk2MzUzOTg0MzEnIH0sXG4gICAgICB7IHR5cGU6ICdEaW5lcnMgQ2x1YicsIG51bWJlcjogJzMwNTY5MzA5MDI1OTA0JyB9LFxuICAgICAgeyB0eXBlOiAnRGlzY292ZXInLCBudW1iZXI6ICc2MDExMTExMTExMTExMTE3JyB9LFxuICAgICAgeyB0eXBlOiAn0JzQuNGAJywgbnVtYmVyOiAnMjIwMDEyMzQ1Njc4OTAwMScgfSxcbiAgICAgIHsgdHlwZTogJ01hc3RlckNhcmQnLCBudW1iZXI6ICc1NTU1NTU1NTU1NTU0NDQ0JyB9LFxuICAgICAgeyB0eXBlOiAnVmlzYScsIG51bWJlcjogJzQxMTExMTExMTExMTExMTEnIH0sXG4gICAgXTtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLm1hcmt1cDtcbiAgfVxuXG4gIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9J3RhYmxlLWV4YW1wbGVzJz5cbiAgICAgICAgPGgzPkV4YW1wbGUgY3JlZGl0IGNhcmQgbnVtYmVyczwvaDM+XG4gICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkXCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICA8dGg+Q3JlZGl0IENhcmQgVHlwZTwvdGg+XG4gICAgICAgICAgICAgIDx0aD5DcmVkaXQgQ2FyZCBOdW1iZXI8L3RoPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICR7dGhpcy5jYXJkc1xuICAgIC5tYXAoXG4gICAgICAoY2FyZCkgPT4gYFxuICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRkPiR7Y2FyZC50eXBlfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPiR7Y2FyZC5udW1iZXJ9PC90ZD5cbiAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIGAsXG4gICAgKVxuICAgIC5qb2luKCcnKX1cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IHZpc2FFbGVjdHJvbiBmcm9tICcuLi8uLi8uLi9pbWcvdmlzYV9lbGVjdHJvbl9jdXJ2ZWQucG5nJztcbmltcG9ydCBNYXN0ZXJDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9tYXN0ZXJjYXJkX2N1cnZlZC5wbmcnO1xuaW1wb3J0IEFtZXhDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9jcmVkaXRfY2FyZF9hbWV4LnBuZyc7XG5pbXBvcnQgRGlzY292ZXJDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9kaXNjb3Zlcl9zdHJhaWdodF8zMnB4LnBuZyc7XG5pbXBvcnQgTWlyQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvbWlyX2NhcmQucG5nJztcbmltcG9ydCBEaW5lcnNDbHViQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvZGluZXJzX2NsdWJfY2FyZC5wbmcnO1xuXG5pbXBvcnQgJy4vY2FyZC1saXN0LmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRzTGlzdCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5jYXJkcyA9IFtcbiAgICAgIHsgY2xhc3M6ICd2aXNhJywgdGl0bGU6ICdWaXNhJywgdXJsOiB2aXNhRWxlY3Ryb24gfSxcbiAgICAgIHsgY2xhc3M6ICdtYXN0ZXInLCB0aXRsZTogJ01hc3RlcmNhcmQnLCB1cmw6IE1hc3RlckNhcmQgfSxcbiAgICAgIHsgY2xhc3M6ICdhbWV4JywgdGl0bGU6ICdBbWVyaWNhbiBFeHByZXNzJywgdXJsOiBBbWV4Q2FyZCB9LFxuICAgICAgeyBjbGFzczogJ2Rpc2NvdmVyJywgdGl0bGU6ICdEaXNjb3ZlcicsIHVybDogRGlzY292ZXJDYXJkIH0sXG4gICAgICB7IGNsYXNzOiAnbWlyJywgdGl0bGU6ICdNaXInLCB1cmw6IE1pckNhcmQgfSxcbiAgICAgIHsgY2xhc3M6ICdkaW5lcnNfY2x1YicsIHRpdGxlOiAnRGluZXJzIENsdWInLCB1cmw6IERpbmVyc0NsdWJDYXJkIH0sXG4gICAgXTtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLm1hcmt1cDtcbiAgfVxuXG4gIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkc1wiPlxuICAgICAgICAke3RoaXMuY2FyZHNcbiAgICAubWFwKFxuICAgICAgKGNhcmQpID0+IGBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aW1nIGNsYXNzPVwiY2FyZCAke2NhcmQuY2xhc3N9XCIgc3JjPSR7Y2FyZC51cmx9IGFsdD1cIiR7Y2FyZC50aXRsZX1cIj5cbiAgICAgICAgPC9kaXY+ICBcbiAgICAgICAgYCxcbiAgICApXG4gICAgLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IGZpbmRQYXltZW50U3lzdGVtIGZyb20gJy4uLy4uL3ZhbGlkYXRpb24vZmluZFBheW1lbnRTeXN0ZW0nO1xuaW1wb3J0IGlzVmFsaWQgZnJvbSAnLi4vLi4vdmFsaWRhdGlvbi9pc1ZhbGlkJztcbmltcG9ydCAnLi9jaGVjay1mb3JtLmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrRm9ybSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICB0aGlzLm9uU3VibWl0ID0gdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25JbnB1dENoYW5nZSA9IHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYmluZFRvRE9NKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IENoZWNrRm9ybS5tYXJrdXA7XG5cbiAgICBjb25zdCB7XG4gICAgICBzZWxlY3RvciwgbWVzc2FnZVNlbGVjdG9yLCBzdWJtaXRTZWxlY3RvciwgaW5wdXRTZWxlY3RvcixcbiAgICB9ID0gQ2hlY2tGb3JtO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5tZXNzYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IobWVzc2FnZVNlbGVjdG9yKTtcbiAgICB0aGlzLnN1Ym1pdCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdFNlbGVjdG9yKTtcbiAgICB0aGlzLmlucHV0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRTZWxlY3Rvcik7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vblN1Ym1pdCk7XG4gICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZSk7XG4gIH1cblxuICBvblN1Ym1pdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgaXNWYWxpZENhcmQgPSBpc1ZhbGlkKHRoaXMuaW5wdXQudmFsdWUpO1xuICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZSgndmFsaWQnLCBpc1ZhbGlkQ2FyZCk7XG4gICAgdGhpcy5pbnB1dC5jbGFzc0xpc3QudG9nZ2xlKCdpbnZhbGlkJywgIWlzVmFsaWRDYXJkKTtcblxuICAgIGlmIChpc1ZhbGlkQ2FyZCkge1xuICAgICAgY29uc3QgcGF5bWVudFN5c3RlbSA9IGZpbmRQYXltZW50U3lzdGVtKHRoaXMuaW5wdXQudmFsdWUpO1xuICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BheW1lbnRTeXN0ZW19YCk7XG5cbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZC1hY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbklucHV0Q2hhbmdlKCkge1xuICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcsICd2YWxpZCcpO1xuICAgIGNvbnN0IGFjdGl2ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1hY3RpdmUnKTtcbiAgICBpZiAoYWN0aXZlQ2FyZCkge1xuICAgICAgYWN0aXZlQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkLWFjdGl2ZScpO1xuICAgIH1cbiAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gIH1cblxuICBzaG93TWVzc2FnZSgpIHtcbiAgICB0aGlzLm1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH1cblxuICBoaWRlTWVzc2FnZSgpIHtcbiAgICB0aGlzLm1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IG1hcmt1cCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGZvcm0gaWQ9XCJmb3JtXCIgY2xhc3M9XCJmb3JtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjYXJkX251bWJlclwiIG5hbWU9XCJjYXJkX251bWJlclwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDcmVkaXQgY2FyZCBudW1iZXJcIiBkYXRhLW9yaWdpbmFsLXRpdGxlPVwiXCIgdGl0bGU9XCJcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSdidXR0b24td3JhcHBlcic+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3VibWl0XCI+Q2xpY2sgdG8gVmFsaWRhdGU8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXNzYWdlIGhpZGRlblwiPtCj0L/RgdGBISDQn9C70LDRgtC10LbQvdC+0Lkg0YHQuNGB0YLQtdC80Ysg0L3QtdGCINCyINCx0LDQt9C1PC9zcGFuPlxuICAgICAgPC9mb3JtPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLmZvcm0nO1xuICB9XG5cbiAgc3RhdGljIGdldCBtZXNzYWdlU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcubWVzc2FnZSc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Ym1pdFNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLnN1Ym1pdCc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlucHV0U2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcuZm9ybS1jb250cm9sJztcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYWxpZCh2YWx1ZSkge1xuICBjb25zdCBudW0gPSBgJHt2YWx1ZX1gO1xuICBsZXQgbkNoZWNrID0gMDtcbiAgbGV0IGJFdmVuID0gZmFsc2U7XG4gIGZvciAobGV0IG4gPSBudW0ubGVuZ3RoIC0gMTsgbiA+PSAwOyBuIC09IDEpIHtcbiAgICBsZXQgbkRpZ2l0ID0gcGFyc2VJbnQobnVtLmNoYXJBdChuKSwgMTApO1xuICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgaWYgKGJFdmVuICYmIChuRGlnaXQgKj0gMikgPiA5KSB7XG4gICAgICBuRGlnaXQgLT0gOTtcbiAgICB9XG4gICAgbkNoZWNrICs9IG5EaWdpdDtcbiAgICBiRXZlbiA9ICFiRXZlbjtcbiAgfVxuXG4gIHJldHVybiBuQ2hlY2sgJSAxMCA9PT0gMDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZpbmRQYXltZW50U3lzdGVtKHZhbHVlKSB7XG4gIGxldCBwYXlTeXN0ZW0gPSAnbm8tZm91bmQnO1xuICBjb25zdCBhID0gU3RyaW5nKHZhbHVlKTtcbiAgaWYgKC9eNFswLTldezEyfSg/OlswLTldezN9KT8kLy50ZXN0KGEpKSB7XG4gICAgcGF5U3lzdGVtID0gJ3Zpc2EnO1xuICB9XG5cbiAgaWYgKC9eKDVbMS01XXwyMjJbMS05XXwyMlszLTldfDJbMy02XXwyN1swMV18MjcyMClbMC05XXswLH0kLy50ZXN0KGEpKSB7XG4gICAgcGF5U3lzdGVtID0gJ21hc3Rlcic7XG4gIH1cblxuICBpZiAoL14yMjAoMHw0KVswLTldezEyfSQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAnbWlyJztcbiAgfVxuXG4gIGlmIChcbiAgICAvXjY1WzQtOV1bMC05XXsxM318NjRbNC05XVswLTldezEzfXw2MDExWzAtOV17MTJ9fCg2MjIoPzoxMls2LTldfDFbMy05XVswLTldfFsyLThdWzAtOV1bMC05XXw5WzAxXVswLTldfDkyWzAtNV0pWzAtOV17MTB9KSQvLnRlc3QoXG4gICAgICBhLFxuICAgIClcbiAgKSB7XG4gICAgcGF5U3lzdGVtID0gJ2Rpc2NvdmVyJztcbiAgfVxuXG4gIGlmICgvXjNbNDddWzAtOV17MTN9JC8udGVzdChhKSkge1xuICAgIHBheVN5c3RlbSA9ICdhbWV4JztcbiAgfVxuXG4gIGlmICgvXjMoPzowWzAtNV18WzY4XVswLTldKVswLTldezExfSQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAnZGluZXJzX2NsdWInO1xuICB9XG5cbiAgcmV0dXJuIHBheVN5c3RlbTtcbn1cbiIsImltcG9ydCBDYXJkc0xpc3QgZnJvbSAnLi4vY2FyZC1saXN0L0NhcmRzTGlzdCc7XG5pbXBvcnQgQ2hlY2tGb3JtIGZyb20gJy4uL2NoZWNrLWZvcm0vQ2hlY2tGb3JtJztcbmltcG9ydCAnLi93aWRnZXQuY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2lkZ2V0IHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbnRhaW5lciBpcyBub3QgSFRNTEVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBXaWRnZXQubWFya3VwO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihXaWRnZXQuc2VsZWN0b3IpO1xuICAgIHRoaXMuZm9ybUNvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFdpZGdldC5mb3JtU2VsZWN0b3IpO1xuICAgIHRoaXMuY2FyZHNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihXaWRnZXQuY2FyZHNTZWxlY3Rvcik7XG5cbiAgICBjb25zdCBmb3JtID0gbmV3IENoZWNrRm9ybSh0aGlzLmZvcm1Db250YWluZXIpO1xuICAgIGZvcm0uYmluZFRvRE9NKCk7XG5cbiAgICBjb25zdCBjYXJkcyA9IG5ldyBDYXJkc0xpc3QodGhpcy5jYXJkc0NvbnRhaW5lcik7XG4gICAgY2FyZHMuYmluZFRvRE9NKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGZvcm1TZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy5mb3JtLWNvbnRhaW5lcic7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNhcmRzU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcuY2FyZHMtY29udGFpbmVyJztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcud2lkZ2V0JztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgbWFya3VwKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPSd3aWRnZXQnPlxuICAgICAgICA8aDM+Q2hlY2sgeW91ciBjcmVkaXQgY2FyZCBudW1iZXI8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzPSdmb3JtLWNvbnRhaW5lcic+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9J2NhcmRzLWNvbnRhaW5lcic+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG59XG4iLCJpbXBvcnQgQ2FyZHNFeGFtcGxlc1RhYmxlIGZyb20gJy4uL2NhcmRzLWV4YW1wbGVzLXRhYmxlL0NhcmRzRXhhbXBsZXNUYWJsZSc7XG5pbXBvcnQgV2lkZ2V0IGZyb20gJy4uL3dpZGdldC9XaWRnZXQnO1xuaW1wb3J0ICcuL3ZhbGlkYXRvci5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG5cbiAgYmluZFRvRE9NKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IFZhbGlkYXRvci5tYXJrVXA7XG4gICAgdGhpcy53aWRnZXRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgICAgVmFsaWRhdG9yLndpZGdldFNlbGVjdG9yLFxuICAgICk7XG4gICAgdGhpcy50YWJsZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoVmFsaWRhdG9yLnRhYmxlU2VsZWN0b3IpO1xuXG4gICAgY29uc3Qgd2lkZ2V0ID0gbmV3IFdpZGdldCh0aGlzLndpZGdldENvbnRhaW5lcik7XG4gICAgd2lkZ2V0LmJpbmRUb0RPTSgpO1xuXG4gICAgY29uc3QgdGFibGUgPSBuZXcgQ2FyZHNFeGFtcGxlc1RhYmxlKHRoaXMudGFibGVDb250YWluZXIpO1xuICAgIHRhYmxlLmJpbmRUb0RPTSgpO1xuICB9XG5cbiAgc3RhdGljIGdldCBtYXJrVXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJoZWFkbWFzdFwiPlxuICAgICAgICA8aDI+VmFsaWRhdGUgQ3JlZGl0IENhcmQgTnVtYmVyczwvaDI+XG4gICAgICAgIDxoMz5DaGVjayBhIGNyZWRpdCBjYXJkIG51bWJlciB3aXRoIG91ciBvbmxpbmUgY2hlY2tlciE8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWNvbnRhaW5lclwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCB3aWRnZXRTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy53aWRnZXQtY29udGFpbmVyJztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdGFibGVTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy50YWJsZS1jb250YWluZXInO1xuICB9XG59XG4iLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gJy4vY29tcG9uZW50cy92YWxpZGF0b3IvVmFsaWRhdG9yJztcblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnNvbGUubG9nKFwiaXQgd29ya3MhXCIpO1xuXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdmFsaWRhdG9yLWNvbnRhaW5lclwiKTtcbmNvbnN0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3IoY29udGFpbmVyKTtcbnZhbGlkYXRvci5iaW5kVG9ET00oKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJDYXJkRXhhbXBsZXNUYWJsZSIsImNvbnN0cnVjdG9yIiwiY29udGFpbmVyIiwiSFRNTEVsZW1lbnQiLCJjYXJkcyIsInR5cGUiLCJudW1iZXIiLCJiaW5kVG9ET00iLCJpbm5lckhUTUwiLCJtYXJrdXAiLCJtYXAiLCJjYXJkIiwiam9pbiIsIkNhcmRzTGlzdCIsImNsYXNzIiwidGl0bGUiLCJ1cmwiLCJ2aXNhRWxlY3Ryb24iLCJNYXN0ZXJDYXJkIiwiQW1leENhcmQiLCJEaXNjb3ZlckNhcmQiLCJNaXJDYXJkIiwiRGluZXJzQ2x1YkNhcmQiLCJDaGVja0Zvcm0iLCJvblN1Ym1pdCIsImJpbmQiLCJvbklucHV0Q2hhbmdlIiwic2VsZWN0b3IiLCJtZXNzYWdlU2VsZWN0b3IiLCJzdWJtaXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lc3NhZ2UiLCJzdWJtaXQiLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImlzVmFsaWRDYXJkIiwidmFsdWUiLCJudW0iLCJuQ2hlY2siLCJiRXZlbiIsIm4iLCJuRGlnaXQiLCJwYXJzZUludCIsImNoYXJBdCIsImlzVmFsaWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJwYXltZW50U3lzdGVtIiwicGF5U3lzdGVtIiwiYSIsIlN0cmluZyIsInRlc3QiLCJmaW5kUGF5bWVudFN5c3RlbSIsImFkZCIsInNob3dNZXNzYWdlIiwicmVtb3ZlIiwiYWN0aXZlQ2FyZCIsImhpZGVNZXNzYWdlIiwiV2lkZ2V0IiwiZm9ybUNvbnRhaW5lciIsImZvcm1TZWxlY3RvciIsImNhcmRzQ29udGFpbmVyIiwiY2FyZHNTZWxlY3RvciIsIlZhbGlkYXRvciIsIm1hcmtVcCIsIndpZGdldENvbnRhaW5lciIsIndpZGdldFNlbGVjdG9yIiwidGFibGVDb250YWluZXIiLCJ0YWJsZVNlbGVjdG9yIiwiQ2FyZHNFeGFtcGxlc1RhYmxlIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=